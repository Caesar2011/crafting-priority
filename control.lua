local a={}local b=require("utils.iterators")local c=b.demoteIterator;local d=b.promoteIterator;local e=b.sameOrderIterator;local f=require("utils.reschedule-crafting")local g=f.rescheduleCrafting;local h=require("utils.validate-player")local i=h.validatePlayer;local j=require("utils.helper")local k=j.debounce;local l=j.onTickUpdateDebounce;script.on_event("promote-craft",function(m)local n=game.players[m.player_index]if not i(n)then return end;g(n,d)end)script.on_event("demote-craft",function(m)local n=game.players[m.player_index]if not i(n)then return end;g(n,c)end)script.on_event("reset-craft",function(m)local n=game.players[m.player_index]if not i(n)then return end;g(n,e)end)script.on_event(defines.events.on_lua_shortcut,function(m)if m.prototype_name~="auto-reset-craft"then return end;local n=game.players[m.player_index]if not i(n)then return end;n.set_shortcut_toggled("auto-reset-craft",not n.is_shortcut_toggled("auto-reset-craft"))end)local o=k("finished-crafting",3,function(n)g(n,e)end)script.on_event(defines.events.on_player_crafted_item,function(m)local n=game.players[m.player_index]if not i(n)or not n.is_shortcut_toggled("auto-reset-craft")then return end;o(n)end)script.on_nth_tick(1,function(m)l(m.tick)end)return a
